import{j as e,z as L,T as b,F as T,A as C,I as F,u as h,s as z,Y as A,r,m as g,B as D,f as p}from"./index-eaf8ef63.js";import{F as j}from"./Flex-7df226c6.js";import{M as N}from"./ModalMenu-9d79a79d.js";import{S as $}from"./Select-62efc146.js";const B=({item:s,handleDelete:u})=>e.jsxs("div",{className:"menu-item-card",children:[e.jsx(L,{src:s==null?void 0:s.image,height:60,width:60,alt:s.name,withPlaceholder:!0}),e.jsxs(j,{gap:"0px",justify:"center",align:"left",direction:"column",wrap:"wrap",maw:200,children:[e.jsx(b,{order:4,truncate:!0,maw:190,children:s.label}),e.jsx("span",{style:{display:"flex"},children:s==null?void 0:s.ingredients.map((i,o)=>e.jsx(T,{size:12,truncate:!0,children:e.jsx(e.Fragment,{children:s.ingredients[o+1]?e.jsx(e.Fragment,{children:`${i} |Â `}):e.jsx(e.Fragment,{children:`${i}`})})},o))})]}),e.jsx(j,{justify:"center",align:"right",direction:"column",sx:{marginLeft:"10px",marginRight:"10px"},children:e.jsx(C,{variant:"subtle",color:"red.4",size:"sm",onClick:()=>{u(s.name)},children:e.jsx(F,{size:"1rem"})})})]});const G=()=>{const{lang:s}=h(z),{ingredients:u,itemTypes:i}=h(A),[o,y]=r.useState([{value:"all",label:s.business.all_type}]),[l,d]=r.useState([]),[x,c]=r.useState(l),[w,v]=r.useState({}),[I,f]=r.useState(!1),k=t=>{const n=l.filter(a=>t=="all"?l:a.type.toLowerCase().includes(t));c(n)},M=t=>{if(l.find(a=>a.name===t)){const a=l.filter(m=>m.name!==t);d(a),c(a),p("av_restaurants","deleteItem",t)}},S=()=>{f(!0)},_=async t=>{var n;if((n=t==null?void 0:t.extraData)!=null&&n.event){const a=await p("av_restaurants","addItem",t);d(a),c(a)}f(!1)};return r.useEffect(()=>{(async()=>{const n=await p("av_restaurants","getMenu");v({title:s.business.add_product,options:[{name:"name",type:"text",title:s.business.product_name,icon:"fa-solid fa-pen-to-square",asterisk:!0},{name:"image",type:"text",title:s.business.image_url,icon:"fa-regular fa-image",asterisk:!0},{name:"description",type:"text",title:s.business.description,icon:"fa-regular fa-comment",asterisk:!0},{name:"type",type:"select",title:s.business.item_type,default:"normal",options:i,asterisk:!0,style:{marginTop:"5px"}},{name:"ingredients",type:"multiselect",title:s.business.ingredients,default:"normal",max:3,searchable:!0,options:u,asterisk:!0,style:{marginTop:"5px"}}],button:s.business.confirm,extraData:{event:"newItem"}}),c(n),d(n),i.map(a=>y(m=>[...m,a]))})()},[]),e.jsxs("div",{className:"menu-container",children:[I&&e.jsx(N,{callback:_,data:w}),e.jsx("div",{style:{position:"absolute",zIndex:"200",bottom:g(45),right:g(20)},children:e.jsx(D,{leftIcon:e.jsx("i",{className:"fa-regular fa-square-plus"}),onClick:S,children:s.business.new_button})}),e.jsxs("div",{className:"menu-header",children:[e.jsx(b,{order:3,children:`${x.length} ${s.business.items}`}),e.jsx($,{defaultValue:"all",data:o,onChange:k})]}),e.jsx("div",{className:"menu-items",children:x.map((t,n)=>e.jsx(B,{item:t,handleDelete:M},t.name+n))})]})};export{G as default};
